const apiURL="https://en.wikipedia.org/w/api.php?callback=?",resultsList=$("#results-list"),submitButton=$("#submit-button"),searchField=$("#search-field"),clearButton=$("#clear-button");$(function(){$(document).on("click","#submit-button, .ui-menu-item",function(){resultsList.empty(),$.getJSON(apiURL,{action:"query",format:"json",inprop:"url",formatversion:2,generator:"search",gsrsearch:$("#search-field").val(),gsrwhat:"text",prop:"extracts|info",exsentences:3,exintro:"",explaintext:"",exlimit:20}).success(function(t){console.log(t),t.query.pages.forEach(function(t){resultsList.append(`<div id="results"><a href="${t.fullurl}" target="_blank"><h2>${t.title}</h2></a><p>${t.extract}</p></div>`)})})}),searchField.keyup(function(t){13==t.keyCode&&(t.preventDefault(),submitButton.click())}),searchField.autocomplete({source:function(t,e){$.ajax({url:"https://en.wikipedia.org/w/api.php",dataType:"jsonp",data:{action:"opensearch",format:"json",search:t.term},success:function(t){e(t[1])}})}}),clearButton.click(function(){searchField.val(""),resultsList.empty()})});